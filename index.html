<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalkulator Hyper Love Edition</title>
<style>
    body {
        margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb);
        overflow: hidden;
        font-family: 'Poppins', sans-serif;
        transition: background 2s;
    }

    /* Kalkulator */
    .calculator {
        width: 320px;
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(15px);
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
        display: grid;
        grid-template-rows: 80px 1fr;
        animation: fadeIn 1.5s ease;
        z-index: 5;
        position: relative;
    }
    @keyframes fadeIn {
        from {opacity:0; transform:translateY(50px);}
        to {opacity:1; transform:translateY(0);}
    }

    .display {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        text-align: right;
        padding: 20px;
        font-size: 2rem;
        color: white;
        overflow: hidden;
        box-shadow: inset 0 0 10px rgba(255,255,255,0.2);
        position: relative;
    }

    .buttons {
        margin-top: 15px;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
    }

    .btn {
        padding: 20px;
        font-size: 1.3rem;
        border: none;
        border-radius: 15px;
        cursor: pointer;
        background: rgba(255, 255, 255, 0.3);
        color: white;
        transition: 0.2s;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        position: relative;
        overflow: hidden;
    }

    .btn::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(120deg, transparent, rgba(255,255,255,0.6), transparent);
        transform: rotate(25deg);
        animation: shine 3s infinite;
    }

    @keyframes shine {
        0% {transform: translateX(-100%) rotate(25deg);}
        100% {transform: translateX(100%) rotate(25deg);}
    }

    .btn:hover { transform: scale(1.05); background: rgba(255, 255, 255, 0.5); }
    .btn:active { transform: scale(0.95); }
    .equal { background: #ff9a9e; color: white; }

    /* Efek */
    .heart { position: absolute; font-size: 2rem; animation: floatUp 2s ease forwards; pointer-events: none; z-index: 10; }
    @keyframes floatUp { 0%{opacity:1;transform:translateY(0)scale(.8);} 100%{opacity:0;transform:translateY(-150px)scale(1.5);} }

    .flash { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.6); animation: flashAnim 0.5s ease forwards; pointer-events: none; z-index: 999; }
    @keyframes flashAnim { 0%{opacity:1;}100%{opacity:0;} }

    .star { position: absolute; color: white; font-size: 1.5rem; animation: fall 1.5s linear forwards; z-index: 20; }
    @keyframes fall { 0%{transform:translate(0,0)rotate(0deg);opacity:1;}100%{transform:translate(100px,200px)rotate(360deg);opacity:0;} }

    .firework { position: absolute; width: 5px; height: 5px; background: yellow; border-radius: 50%; animation: boom 1s ease-out forwards; z-index: 30; }
    @keyframes boom { 0%{transform:scale(0.5);opacity:1;}100%{transform:scale(3);opacity:0;} }
</style>
</head>
<body>

<audio id="clickSound" src="click.mp3" preload="auto"></audio>
<audio id="loveSound" src="bgmusic.mp3" preload="auto" loop></audio>

<div class="calculator">
    <div class="display" id="display">0</div>
    <div class="buttons">
        <button class="btn" onclick="btnClick();clearDisplay()">C</button>
        <button class="btn" onclick="btnClick();appendValue('/')">Ã·</button>
        <button class="btn" onclick="btnClick();appendValue('*')">Ã—</button>
        <button class="btn" onclick="btnClick();appendValue('-')">âˆ’</button>

        <button class="btn" onclick="btnClick();appendValue('7')">7</button>
        <button class="btn" onclick="btnClick();appendValue('8')">8</button>
        <button class="btn" onclick="btnClick();appendValue('9')">9</button>
        <button class="btn" onclick="btnClick();appendValue('+')">+</button>

        <button class="btn" onclick="btnClick();appendValue('4')">4</button>
        <button class="btn" onclick="btnClick();appendValue('5')">5</button>
        <button class="btn" onclick="btnClick();appendValue('6')">6</button>
        <button class="btn equal" onclick="btnClick();calculate()">=</button>

        <button class="btn" onclick="btnClick();appendValue('1')">1</button>
        <button class="btn" onclick="btnClick();appendValue('2')">2</button>
        <button class="btn" onclick="btnClick();appendValue('3')">3</button>
        <button class="btn" onclick="btnClick();appendValue('0')">0</button>
    </div>
</div>

<script>
let display = document.getElementById('display');
let currentInput = '';
const defaultBg = 'linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb)';
let loveMode = false;

function btnClick() { document.getElementById('clickSound').play(); }

function appendValue(val) {
    if (display.innerText === '0' || display.innerText === 'I love you ðŸ’–ðŸ’–') {
        display.innerText = val;
        currentInput = val;
    } else {
        display.innerText += val;
        currentInput += val;
    }
}

function clearDisplay() {
    display.innerText = '0';
    currentInput = '';
}

function createHeart() {
    const heart = document.createElement('div');
    heart.className = 'heart';
    heart.innerHTML = 'ðŸ’–';
    heart.style.left = `${Math.random() * window.innerWidth}px`;
    heart.style.top = `${window.innerHeight - 50}px`;
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 2000);
}

function createFlash() {
    const flash = document.createElement('div');
    flash.className = 'flash';
    document.body.appendChild(flash);
    setTimeout(() => flash.remove(), 500);
}

function createStar() {
    const star = document.createElement('div');
    star.className = 'star';
    star.innerHTML = 'âœ¦';
    star.style.left = `${Math.random() * window.innerWidth}px`;
    star.style.top = `0px`;
    document.body.appendChild(star);
    setTimeout(() => star.remove(), 1500);
}

function createFirework(x,y) {
    for(let i=0;i<5;i++){
        const fw = document.createElement('div');
        fw.className = 'firework';
        fw.style.left = `${x}px`;
        fw.style.top = `${y}px`;
        fw.style.background = ['yellow','red','cyan','magenta','lime'][i%5];
        document.body.appendChild(fw);
        setTimeout(()=>fw.remove(),1000);
    }
}

function rainbowBackground() {
    let hue = 0;
    const interval = setInterval(() => {
        if (!loveMode) return clearInterval(interval);
        hue = (hue + 2) % 360;
        document.body.style.background = `linear-gradient(135deg, hsl(${hue},100%,70%), hsl(${(hue+120)%360},100%,70%), hsl(${(hue+240)%360},100%,70%))`;
    }, 50);
}

function calculate() {
    if (currentInput === '999+999') {
        display.innerText = 'I love you ðŸ’–ðŸ’–';
        currentInput = '';
        loveMode = true;
        document.getElementById('loveSound').play();
        createFlash();
        rainbowBackground();

        for (let i = 0; i < 15; i++) setTimeout(createHeart, i * 120);
        for (let i = 0; i < 10; i++) setTimeout(createStar, i * 200);
        for (let i = 0; i < 5; i++) setTimeout(()=>createFirework(Math.random()*window.innerWidth, Math.random()*window.innerHeight/2), i*400);

        setTimeout(()=>{
            loveMode = false;
            document.body.style.background = defaultBg;
            document.getElementById('loveSound').pause();
            document.getElementById('loveSound').currentTime = 0;
        },5000);

    } else {
        try {
            display.innerText = eval(currentInput);
            currentInput = display.innerText;
        } catch {
            display.innerText = 'Error';
            currentInput = '';
        }
    }
}
</script>

</body>
</html>